
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>4 Unit 2 Literature Common Assessment</title>
  <style>
    body { font-family: Verdana, sans-serif; line-height: 1.6; margin: 40px; font-size: 1.8em; }
    h1, h2, h3 { text-align: center; }
    .container { max-width: 1200px; margin: auto; }
    .question { margin-bottom: 20px; }
    .correct { background-color: #d4edda; }
    .incorrect { background-color: #f8d7da; }
    .feedback { font-weight: bold; margin-top: 5px; }
    input[type="checkbox"] { transform: scale(2.5); margin: 10px; background-color: blue; }
    input[type="radio"] { transform: scale(2.5); margin: 10px; background-color: blue; }
    button[type="submit"] {
      width: 350px; height: 80px; padding: 10px 20px;
      background-color: #4CAF50; color: white; font-size: 1.5em; margin: 30px;
    }
          .number-circle {
  display: inline-block;
  background: black;
  color: white;
  font-weight: bold;
  font-size: 20px;
  border-radius: 40%;   /* makes it a circle */
  width: 44px;
  height: 24px;
  line-height: 24px;   /* centers text vertically */
  text-align: center;
  margin-right: 8px;
}
    #teacherName {
      width: 280px; height: 60px; padding: 8px; border: 1px solid #ccc; border-radius: 4px;
      font-family: Georgia, serif; font-size: 24px; color: #333; background-color: #fcfc03;
    }
    hr.rounded { border-top: 15px solid #bbb; border-radius: 5px; }
    .unanswered { border: 2px solid red; background-color: #ffe6e6; padding: 8px; border-radius: 5px; }
  </style>
</head>
<body>

<div class="container">
  <h1>Grade 4 Unit 2 Literature Common Assessment</h1>

  <h4 style="font-size: 20px">Standards</h4>
  <p style="text-align: left; font-size: 16px;"><strong>RI.4.2:</strong> Determine the theme of a story, drama, or poem from details in the text; summarize the text.</p>
  <p style="text-align: left; font-size: 16px;"><strong>RI.4.4:</strong> Determine the meaning of words and phrases as they are used in a text, including those that allude to significant characters found in mythology, Tall Tales and Fables. (e.g. Herculean).</p>
  <p style="text-align: left; font-size: 16px;"><strong>L.4.2:</strong> Demonstrate command of the conventions of standard English capitalization, punctuation, and spelling when writing.</p>

  <h2>Directions</h2>
  <p>Read the text and answer the questions that follow.</p>

  <h2>Trail to Darkness</h2>
  <p style="text-align: center; font-size: 16px;"><strong>by Bradford H. Robie, Highlights, Highlights for Children on 12.12.19 (Newsela)</strong></p>

 <iframe src="https://drive.google.com/file/d/1RwaTMjWZgJlkwYlmr_ajOZOVWa1KUmRV/preview" width="640" height="480" allow="autoplay"></iframe>
  
  <p><span class="number-circle">1</span> A boulder as big as a house. That's how the guide book described Giant Rock. Dad said it was carried here by a glacier millions of years ago.</p>
  <p><span class="number-circle">2</span> “I was finally going to see it, on snowshoes, with my three older cousins, my dad, and my uncle Don. I'd been snowshoeing before, and I liked the adventure of trekking through deep snow alongside wild-animal tracks. At the parking area, after putting on our snowshoes, we studied the map in the information kiosk. "We start here," Dad said, "on the red trail. Then we turn left onto the purple loop. That's where Giant Rock is."</p>
  <p><span class="number-circle">3</span> "Remember to stick together, guys," Uncle Don said.</p>
  <p><span class="number-circle">5</span> My cousins were fast, but I managed to keep up. The trail ran uphill alongside a stone wall. It was easy to follow because red markers were nailed to the trees and the snow had been packed down by other hikers. At the top of the hill, we turned onto the purple trail, which wound back and forth, traversing the hills and gullies. We settled into a rhythm, with Dad and everyone else in front and me in the back, crunch-crunch-crunching through the snow.</p>
  <p><span class="number-circle">6</span> The late afternoon sun felt warm, although it was already sinking lower. I saw lots of animal tracks—mostly deer, squirrel, and rabbit prints, which I recognized from my field guide. As the trail zigzagged on, my cousin Andrew said what I'd been thinking: "Will we ever reach Giant Rock?</p>
  <p><span class="number-circle">7</span> "It really is as big as a house!"</p>
  <p><span class="number-circle">8</span> My cousin Aiden smiled and turned to me. "Luke, do you think your dad invented the idea of Giant Rock just to get us away from the TV for a while?"</p>
  <p><span class="number-circle">9</span> I laughed. "You never know."</p>
  <p><span class="number-circle">10</span> Finally, we crested a hill and saw the massive boulder sitting alone in the forest. "It really is as big as a house!" my cousin Josh said, gazing up.</p>
  <p><span class="number-circle">11</span> My cousins and I high-fived each other and jogged down the slope until we stood at the base, breathless. Standing in the boulder's giant shadow, I noticed the sun had dipped even lower.</p>
  <p><span class="number-circle">12</span> "Let's head back," Dad said after a few minutes.</p>
  <p><span class="number-circle">13</span> Soon we were crunch-crunch-crunching our way home. I was a little behind the group when I noticed a set of animal tracks I didn't recognize. They were hard to see among the snowshoe prints, so I followed them off the trail for a closer look. There were no claw marks, which meant they didn't belong to a dog or a fox. Instead, they looked like tiny handprints and footprints. Must be a raccoon, I thought, matching them to prints in my guide.</p>
  <p><span class="number-circle">14</span> "Where is everyone?"</p>
  <p><span class="number-circle">15</span> I looked up when I suddenly realized how quiet it had gotten. I was totally alone. "Hey!" I shouted.</p>
  <p><span class="number-circle">16</span> Nothing. Just the sound of my own breathing and the hammering of a woodpecker echoing in the bare woods. They couldn't have gone far, I thought, stepping back onto the trail. I'll catch up to them if I hurry.</p>
  <p><span class="number-circle">17</span> I came to a junction where I could turn left or go straight, but both trails had purple markers. The path to the left looked familiar, but when I stepped over a log I thought I'd seen before something told me I was going the wrong way, so I reversed direction. My mind started to race. Soon it might be too dark to tell what color the markers were. I couldn't just follow my own footsteps because there were so many tracks from other hikers.</p>
  <p><span class="number-circle">18</span> It seemed to grow darker by the second. I had no flashlight. No phone. I began running. What if I couldn't find my way back? I started tearing through the woods in a panic, watching as the sun disappeared behind the trees. Then I came to a crossroads. Which way should I turn?</p>
  <p><span class="number-circle">19</span> Stop, I told myself. Think. I pictured the map again. To get to Giant Rock we had turned left onto the purple loop. To get back, I needed to do the opposite and turn right onto the red trail. If this didn't work, I'd do what I had always heard you should do in a situation like this: stay put, and let your group find you.</p>
  <p><span class="number-circle">20</span> I heard voices, someone calling. Then I noticed the stone wall, the trail running alongside it. This had to be right. I plunged downhill in giant steps. And then, the best sight ever: the parking lot—and my family! I shouted as I ran toward them.</p>
  <p><span class="number-circle">21</span> "Luke? Are you OK?" Dad's voice was urgent. He shined a flashlight in my direction. I'd only been lost for minutes, but it had felt like forever. Now all I wanted was a bear hug from Dad and to make tracks for home.</p>
  
  <div style="background-color: Gainsboro;">
  <form id="quizForm">
    
  <h2>Questions</h2>

  <!-- onsubmit removed; JS handles submission -->
  <form id="quizForm">
    <!-- 1a -->
    <div class="question" data-answer="b" data-type="radio" data-name="q1a">
      <p><strong>1a. From these themes, which one do you think is the <u>best</u> represented in this text? (RL.4.2)</strong></p>
      <label for="q1a_a"><input type="radio" name="q1a" value="a" id="q1a_a"> a) You should always be honest.</label><br>
      <label for="q1a_b"><input type="radio" name="q1a" value="b" id="q1a_b"> b) You can work together to make a change in your community.</label><br>
      <label for="q1a_c"><input type="radio" name="q1a" value="c" id="q1a_c"> c) You can always make friends with anyone.</label><br>
      <label for="q1a_d"><input type="radio" name="q1a" value="d" id="q1a_d"> d) Kids can make a difference.</label>
    </div>

    <!-- 1b -->
    <div class="question" data-type="openq1b" data-name="q1b">
      <p><strong>1b. Explain your selection in Part A using complete sentences and evidence from the text. (RL.4.2)</strong></p>
      <textarea style="font-size: 36px; color: #333333; font-family: 'Tahoma', sans-serif; width: 100%;" id="openq1b" rows="4" cols="50"></textarea>
    </div>

    <!-- 2a -->
    <div class="question" data-answer="a" data-type="radio" data-name="q2a">
      <p><strong>2a. Select the statement that <u>best</u> describes what kind of city council leader Jasmine’s mother would be if she won the election. (RL.4.1)</strong></p>
      <label for="q2a_a"><input type="radio" name="q2a" value="a" id="q2a_a"> a) Jasmine’s mother would be a caring leader.</label><br>
      <label for="q2a_b"><input type="radio" name="q2a" value="b" id="q2a_b"> b) Jasmine’s mother would be an organized leader.</label><br>
      <label for="q2a_c"><input type="radio" name="q2a" value="c" id="q2a_c"> c) Jasmine’s mother would be an empathetic leader.</label><br>
      <label for="q2a_d"><input type="radio" name="q2a" value="d" id="q2a_d"> d) Jasmine’s mother would be a hardworking leader.</label>
    </div>

    <!-- 2b -->
    <div class="question" data-answer="a" data-type="radio" data-name="q2b">
      <p><strong>2b. What evidence from the story supports your answer? (RL.4.1)</strong></p>
      <label for="q2b_a"><input type="radio" name="q2b" value="a" id="q2b_a"> a) She is a firefighter and has spent her whole life helping others.</label><br>
      <label for="q2b_b"><input type="radio" name="q2b" value="b" id="q2b_b"> b) She has a flier to communicate all the things she plans to work on if she is elected.</label><br>
      <label for="q2b_c"><input type="radio" name="q2b" value="c" id="q2b_c"> c) She has a daughter who will help her.</label><br>
      <label for="q2b_d"><input type="radio" name="q2b" value="d" id="q2b_d"> d) She was working hard to knock on voters' doors to win the election.</label>
    </div>

    <!-- 3a -->
    <div class="question" data-answer="d" data-type="radio" data-name="q3a">
      <p><strong>3a. Choose the sentence below that <u>best summarizes</u> the story. (RL.4.2)</strong></p>
      <label for="q3a_a"><input type="radio" name="q3a" value="a" id="q3a_a"> a) Kyla learns about city councils from her social studies teacher and convinces her mom to run for office. She wins the election.</label><br>
      <label for="q3a_b"><input type="radio" name="q3a" value="b" id="q3a_b"> b) Kyla and her mom canvassed their neighborhood to try and win votes in the election. They convince enough people that she would make a positive impact on their town.</label><br>
      <label for="q3a_c"><input type="radio" name="q3a" value="c" id="q3a_c"> c) The boss at the fire station tells Kyla’s mom that she should run for office. She listens to him so she can make a positive change for her town and she tries to win the election.</label><br>
      <label for="q3a_d"><input type="radio" name="q3a" value="d" id="q3a_d"> d) Kyla’s mom is a firefighter who realizes the way to help make positive changes that her community needs is by running for city council. Kyla helps her mom campaign and she wins the election.</label>
    </div>

    <!-- 3b -->
    <div class="question" data-answer="b,c" data-type="checkbox" data-name="q3b">
      <p><strong>3b. Which <u>TWO</u> pieces of evidence from the passage <u>best</u> support the answer to part 3a? (RL.4.2)</strong></p>
      <label for="q3b_a"><input type="checkbox" name="q3b" value="a" id="q3b_a"> a) She pointed to a map: our district, Ward 6, was in the western part of the city, near the river. “In order to run for your local seat, first you need to get your name on the official ballot.”</label><br>
      <label for="q3b_b"><input type="checkbox" name="q3b" value="b" id="q3b_b"> b) “I’m tired of our concerns being ignored or put off until later. Folks in this town rely on the fire department for help. We need a bridge over the river to help with traffic, and we need to fix the roads.”</label><br>
      <label for="q3b_c"><input type="checkbox" name="q3b" value="c" id="q3b_c"> c) Some supporters were so enthusiastic that they decided to volunteer with our campaign, and suddenly we had a whole team to help us. They went canvassing, too, working to convince our community that my mom would be the best representative.</label><br>
      <label for="q3b_d"><input type="checkbox" name="q3b" value="d" id="q3b_d"> d) We tried our hardest, and we’ve brought our community together. That’s no small thing.” I nodded, but my stomach felt like it was full of butterflies. I knew my mom was right, but I still really wanted her to win.</label><br>
      <label for="q3b_e"><input type="checkbox" name="q3b" value="e" id="q3b_e"> e) My mom shook her head and sighed, “My job is to put out fires, Jasmine, not fix the roads.”</label>
    </div>

    <!-- 4a -->
    <div class="question" data-type="openq4a" data-name="q4a">
      <p><strong>4a. What does the word <em><u>canvassing</u></em> mean in this text? Write your answer in a complete sentence. (RL.4.4)</strong></p>
      <textarea style="font-size: 36px; color: #333333; font-family: 'Tahoma', sans-serif; width: 100%;" id="openq4a" rows="4" cols="50"></textarea>
    </div>

    <!-- 4b -->
    <div class="question" data-answer="b,c" data-type="checkbox" data-name="q4b">
      <p><strong>4b. Select <u>TWO</u> details from the text or picture that helps you understand the meaning of the word <em><u>canvassing</u></em> in paragraph 13? (RL.4.4)</strong></p>
      <label for="q4b_a"><input type="checkbox" name="q4b" value="a" id="q4b_a"> a) “Canvassing worked!”</label><br>
      <label for="q4b_b"><input type="checkbox" name="q4b" value="b" id="q4b_b"> b) “Now we knock on doors.”</label><br>
      <label for="q4b_c"><input type="checkbox" name="q4b" value="c" id="q4b_c"> c) “Some people were helpful and some people just shut their doors on us.”</label><br>
      <label for="q4b_d"><input type="checkbox" name="q4b" value="d" id="q4b_d"> d) “Now that I am getting to know my community, I can see that politics touches everyone.”</label><br>
      <label for="q4b_e"><input type="checkbox" name="q4b" value="e" id="q4b_e"> e) “That’s why it matters to elect someone who cares too.”</label>
    </div>
</div>
    <hr class="rounded">
    <p style="text-align: center; font-size: 40px; color: brown;"><b>This is the end of the test.</b></p>
    <p style="text-align: left; font-size: 28px; color: brown;"><em>Make sure that you:</em></p>
    <ul>
      <li style="color: brown;">Check your answers before submitting the test.</li>
      <li style="color: brown;">Type in your <b>name</b> and <b>last name</b> <u>correctly</u></li>
      <li style="color: brown;">Enter <u>your</u> <b>teacher</b>'s name.</li>
    </ul>
    <p style="font-size: 28px; color: brown;"><em>When you are ready, click 'Submit' and your test will be auto-graded.</em></p>

      <hr class="rounded">

    <label>
      <p>
        Name & Last Name (required):
        <input style="width: 400px; height: 45px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-family: Georgia, serif; font-size: 24px; color: #030303; background-color: #fcfc03;"
               type="text" id="studentName" name="name" placeholder="Type Your Name Here" required aria-label="Student Name">
      </p>
    </label>

    <label>
      <p>
        Teacher (required):
        <select id="teacherName" name="teacher" required aria-label="Teacher">
          <option value="" disabled selected>Select your teacher</option>
          <option value="Becerril">Becerril</option>
          <option value="Cerwin">Cerwin</option>
          <option value="Diaz">Diaz</option>
        </select>
      </p>
    </label>

    <hr class="rounded">
    <div style="text-align: center;">
      <button type="submit" id="submitBtn">Submit</button>
    </div>
  </form>

  <div id="result" style="margin-top:20px; font-weight:bold;"></div>
</div>

<script>
(() => {
  const form = document.getElementById("quizForm");
  const submitBtn = document.getElementById("submitBtn");
  let isSubmitting = false;

  form.addEventListener("submit", async function(e) {
    e.preventDefault();
    if (isSubmitting) return; // prevent double-clicks

    // Validate name & teacher first
    const studentNameEl = document.getElementById("studentName");
    const teacherNameEl = document.getElementById("teacherName");
    studentNameEl.classList.remove("unanswered");
    teacherNameEl.classList.remove("unanswered");

    if (!studentNameEl.value.trim()) {
      alert("⚠️ Please enter your name.");
      studentNameEl.classList.add("unanswered");
      studentNameEl.scrollIntoView({ behavior: "smooth", block: "center" });
      studentNameEl.focus();
      return;
    }
    if (!teacherNameEl.value) {
      alert("⚠️ Please select your teacher.");
      teacherNameEl.classList.add("unanswered");
      teacherNameEl.scrollIntoView({ behavior: "smooth", block: "center" });
      teacherNameEl.focus();
      return;
    }

    // Clear old highlights
    document.querySelectorAll(".question").forEach(q => {
      q.classList.remove("unanswered", "correct", "incorrect");
    });

    // Pass 1: Validation only
    let score = 0;
    let total = 0;
    let openResponses = [];
    let allAnswered = true;
    let firstUnanswered = null;

    document.querySelectorAll(".question").forEach(q => {
      const type = q.dataset.type;
      const name = q.dataset.name;

      if (type === "radio") {
        total++;
        const chosen = document.querySelector(`input[name="${name}"]:checked`);
        if (!chosen) {
          allAnswered = false;
          q.classList.add("unanswered");
          if (!firstUnanswered) firstUnanswered = q;
        }
      } else if (type === "checkbox") {
        total++;
        const selected = Array.from(document.querySelectorAll(`input[name="${name}"]:checked`));
        if (selected.length !== 2) {
          allAnswered = false;
          q.classList.add("unanswered");
          if (!firstUnanswered) firstUnanswered = q;
        }
      } else {
        const textarea = q.querySelector("textarea");
        if (textarea && textarea.value.trim() === "") {
          allAnswered = false;
          q.classList.add("unanswered");
          if (!firstUnanswered) firstUnanswered = q;
        }
      }
    });

    if (!allAnswered) {
      alert("⚠️ Please answer all questions. (Checkbox questions must have exactly TWO choices.)");
      if (firstUnanswered) {
        firstUnanswered.scrollIntoView({ behavior: "smooth", block: "center" });
      }
      return;
    }

    // Pass 2: Grade & collect
    let detailedAnswers = {};
    document.querySelectorAll(".question").forEach(q => {
      const type = q.dataset.type;
      const correct = q.dataset.answer;
      const name = q.dataset.name;
      let studentAnswer = "";

      if (type === "radio") {
        const chosen = document.querySelector(`input[name="${name}"]:checked`);
        studentAnswer = chosen.value;
        if (chosen.value === correct) {
          score++;
          q.classList.add("correct");
        } else {
          q.classList.add("incorrect");
        }
      } else if (type === "checkbox") {
        const selected = Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(cb => cb.value);
        studentAnswer = selected.join(",");
        const correctAnswers = (correct || "").split(",");
        const isCorrect = selected.length === correctAnswers.length && correctAnswers.every(ans => selected.includes(ans));
        if (isCorrect) {
          score++;
          q.classList.add("correct");
        } else {
          q.classList.add("incorrect");
        }
      } else {
        const textarea = q.querySelector("textarea");
        if (textarea) {
          studentAnswer = textarea.value.trim();
          openResponses.push({ question: q.querySelector("p").innerText, answer: studentAnswer });
          q.classList.add("correct"); // recorded
        }
      }

      detailedAnswers[name] = studentAnswer;
    });

    const percent = Math.round((score / total) * 100);
    const studentName = studentNameEl.value.trim();
    const teacherName = teacherNameEl.value;

    // Display report
    let openHTML = "";
    if (openResponses.length > 0) {
      openHTML = "<h3>Open-Ended Responses</h3><ul>";
      openResponses.forEach(r => {
        openHTML += `<li><strong>${r.question}</strong><br>Response: ${r.answer}</li>`;
      });
      openHTML += "</ul>";
    }

    document.getElementById("result").innerHTML = `
      <h3>Student Report Card</h3>
      <p><strong>Student:</strong> ${studentName}</p>
      <p><strong>Teacher:</strong> ${teacherName}</p>
      <p><strong>Score:</strong> ${score} out of ${total} correct (${percent}%).</p>
      <p><em>Note:</em> Only multiple-choice and checkbox questions are auto-graded.</p>
      ${openHTML}
    `;

    // Prepare payload for Google Sheets
    const payload = { studentName, teacherName, score, percent, ...detailedAnswers };
    const formBody = Object.keys(payload)
      .map(key => encodeURIComponent(key) + "=" + encodeURIComponent(payload[key]))
      .join("&");

    // Lock UI & send
    isSubmitting = true;
    const originalBtnText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = "Submitting...";

    try {
      const res = await fetch("https://script.google.com/macros/s/AKfycbz7ujYPH-7VFJ41wMfEwU50Zw1_a_SWt8VzgvTn3uSeksn83Gd2qmgdvM9WqDjy7gxwTw/exec", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: formBody
      });
      const data = await res.text();
      console.log("Server response:", data);
      submitBtn.textContent = "Submitted ✓"; // keep disabled to prevent resubmission
      alert("Quiz submitted successfully!");
    } catch (err) {
      console.error("Error:", err);
      alert("There was an error submitting your quiz. Please try again.");
      isSubmitting = false;
      submitBtn.disabled = false;
      submitBtn.textContent = originalBtnText;
    }
  });
})();
</script>

</body>
</html>
